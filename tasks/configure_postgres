
- name: Create user for Postgresql connection
  postgresql_user: state=present encrypted=yes
    name="{{ postgres_connection_user }}" password="{{ postgres_connection_pass }}"

- name: Create database
  postgresql_db: name="{{ postgres_database_name }}" owner="{{ postgres_connection_user }}"

- name: Grant privileges to database from user
  postgresql_privs: db="{{ postgres_database_name }}" roles="{{ postgres_connection_user }}" privs="all"

- name: Enable extensions
  postgresql_ext: db="{{ postgres_database_name }}" name="{{ item }}" state=present
  with_items:
   - postgis
   - postgis_topology
   - fuzzystrmatch
   - postgis_tiger_geocoder

